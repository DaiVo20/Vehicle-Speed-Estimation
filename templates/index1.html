<!DOCTYPE html>
<html lang="en">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
    <script src="https://cdn.rawgit.com/jasondavies/d3-cloud/v1.2.1/build/d3.layout.cloud.js"></script>
    <script src="{{url_for('static', filename='script/script.js')}}"></script>

    <!-- Bootstraps Java Scipts Links -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <!-- JQuery links  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!--High CHART LIVE  -->
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/highcharts-more.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>

    <script>

        const Http = new XMLHttpRequest();
        var rangeslider = document.getElementById("sliderRange"); 
        var current;
                    
        rangeslider.oninput = function() {
            current = this.value;
            Http.open('POST', '/')
            Http.send(current)
        }
    </script>
  
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>DashBoard</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Work+Sans&display=swap" rel="stylesheet">

        <link 
            rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
            integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
            crossorigin="anonymous"/>
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='styles/styles.css') }}"/>
    </head>

    <body>
        <main>
            <!-- Page Header -->
            <header width="100%">
                <!-- Title -->
                <h2 style="text-align: center; width: 100%;">Streaming Video Kafka</h2>
            </header>

            <!-- Add Charts-->
            <div class="graphBox" style="padding: 2rem 2rem;">
                <div class="box" style="height:100%; padding:0;">
                    <!-- <canvas id="doughnut_chart"></canvas> -->
                    <img  src="{{ url_for('video_feed') }}" style="width:100%; height: 100%; border-radius: 25px; object-fit:contain;"> 
                </div>
                <div class="box">
                    <div class="container-fluid" id="data-container"></div>
                    <!-- <canvas id="chart"></canvas> -->
                </div>
            </div>
            
            <div class="graphBox" style="padding: 0rem 2rem 2rem 2rem;">
                <div style="margin: auto;">
                    <label style="width: 100%; text-align: center; font-family: 'Work Sans', sans-serif; font-size: 20px; margin: 0;">Confidence</label>
                    <div>
                        <input id="sliderRange" type="range" value="0" max="100" style="margin: 8px 0px 8px;">
                        <div style="margin: auto;" id="h4-container">
                            <div style="margin: auto;" id="h4-subcontainer">
                                <h4 id="mybtn" name="button">
                                    0
                                    <span></span>
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-cards" >
                    <!-- Total car -->
                    <div class="card-single">
                        <div>
                            <h1  id="count_car">{{ count_car }}</h1>
                            <span style="font-family: 'Work Sans', sans-serif; font-size: 20px;">Car</span>
                        </div>
                        <div>
                            <span  style="padding-right:3px; padding-top: 3px; display:inline-block;">
                                <img src="{{url_for('static', filename='icon/car.png')}}" style="width:64px;height:64px;"></img>
                            </span>
                        </div>
                    </div>

                    <!-- Total van -->
                    <div class="card-single">
                        <div>
                            <h1 id="count_van">{{ count_van }}</h1>
                            <span style="font-family: 'Work Sans', sans-serif; font-size: 20px;">Van</span>
                        </div>
                        <div>
                            <span style="padding-right:3px; padding-top: 3px; display:inline-block;">
                                <img src="{{url_for('static', filename='icon/van.png')}}" style="width:64px;height:64px;"></img>
                            </span>
                        </div>
                    </div>

                    <!-- Total bus -->
                    <div class="card-single">
                        <div>
                            <h1 id="count_bus">{{ count_bus }}</h1>
                            <span style="font-family: 'Work Sans', sans-serif; font-size: 20px;">Bus</span>
                        </div>
                        <div >
                            <span  style="padding-right:3px; padding-top: 3px; display:inline-block;">
                                <img src="{{url_for('static', filename='icon/bus.png')}}" style="width:64px;height:64px;"></img>
                            </span>
                        </div>
                    </div>

                    <!-- Total truck -->
                    <div class="card-single" style="background-color: white;">
                        <div>
                            <h1 id="count_truck">{{ count_truck }}</h1>
                            <span style="font-family: 'Work Sans', sans-serif; font-size: 20px;">Truck</span>
                        </div>
                        <div >
                            <span  style="padding-right:3px; padding-top: 3px; display:inline-block;">
                                <img src="{{url_for('static', filename='icon/truck.png')}}" style="width:64px;height:64px;"></img>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </body>
</html>

